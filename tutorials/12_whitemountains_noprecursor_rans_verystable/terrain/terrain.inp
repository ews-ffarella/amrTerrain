# Generating the terrain file
# Geometry
geometry.prob_lo                                   = -25000 -25000 0 
geometry.prob_hi                                   = 24980 24980 5888 
geometry.is_periodic                               = 0 0 0
# Grid 
amr.n_cell                                         = 520 520 248
time.stop_time                                     = 600
time.initial_dt                                    = 1.0
time.fixed_dt                                      = -1
time.cfl                                           = 0.5
time.plot_time_interval                            = 600
time.checkpoint_time_interval                      = -1
io.output_default_variables                        = false 
io.outputs                                         = velocity temperature mu_turb tke terrainz0 
io.int_outputs                                     = terrain_blank terrain_drag 
# incflo 
incflo.physics                                     = ABL TerrainDrag
incflo.density                                     = 1.225
incflo.gravity                                     = 0.  0. -9.81 
incflo.velocity                                    = 5.99018 0.889729 0 
incflo.verbose                                     = 0
incflo.initial_iterations                          = 8
incflo.do_initial_proj                             = true
incflo.constant_density                            = true
incflo.use_godunov                                 = true
incflo.godunov_type                                = "ppm"
incflo.diffusion_type                              = 2
# transport equation parameters 
transport.model                                    = ConstTransport
transport.viscosity                                = 1e-5
transport.laminar_prandtl                          = 0.7
transport.turbulent_prandtl                        = 0.333
# turbulence equation parameters
turbulence.model                                   = KLAxell
TKE.source_terms                                   = KransAxell
# Atmospheric boundary layer
ABL.perturb_velocity                               = false
ABL.perturb_temperature                            = false
ABL.kappa                                          = .41
ABL.normal_direction                               = 2
ABL.reference_temperature                          = 300
ABL.stats_output_format                            = netcdf
ABL.surface_roughness_z0                           = 0.1
ABL.wall_shear_stress_type                         = local
ABL.surface_temp_flux                              = -1.22536
ABL.mol_length                                     = 60
ABL.wall_het_model                                 = "mol"
ABL.horizontal_sponge_temp                         = true
ABL.horizontal_sponge_tke                          = true
# Source
ICNS.source_terms                                  = ABLMeanBoussinesq BoussinesqBuoyancy  CoriolisForcing  GeostrophicForcing  DragForcing 
GeostrophicForcing.geostrophic_wind                = 5.99018 0.889729 0
TerrainDrag.terrain_file                           = "terrain.amrwind.new" 
Temperature.source_terms                           = TemperatureFreeAtmosphereForcing  DragTempForcing
DragForcing.sponge_west                            = 1
DragForcing.sponge_east                            = 1
DragForcing.sponge_north                           = 1
DragForcing.sponge_south                           = 1
DragForcing.sponge_distance_west                   = -2500
DragForcing.sponge_distance_east                   = 2500
DragForcing.sponge_distance_south                  = -2500
DragForcing.sponge_distance_north                  = 2500
DragTempForcing.soil_temperature                   = 245.346
RayleighDamping.force_coord_directions             = 0 0 1
BoussinesqBuoyancy.reference_temperature           = 300
BoussinesqBuoyancy.thermal_expansion_coeff         = 0.00333333
CoriolisForcing.east_vector                        = 1.0 0.0 0.0 
CoriolisForcing.north_vector                       = 0.0 1.0 0.0 
CoriolisForcing.latitude                           = 44.1645 
RayleighDamping.reference_velocity                 = 5.99018 0.889729 0
RayleighDamping.length_sloped_damping              = 512
RayleighDamping.length_complete_damping            = 1536
RayleighDamping.time_scale                         = 20.0
ABL.metmast_horizontal_radius                      = 500
ABL.metmast_vertical_radius                        = 5
ABL.metmast_damping_radius                         = 100
# BC 
xlo.type                                           = "pressure_outflow"
xhi.type                                           = "pressure_outflow"
ylo.type                                           = "pressure_outflow"
yhi.type                                           = "pressure_outflow"
zhi.type                                           = "slip_wall"
zhi.temperature_type                               = "fixed_gradient"
zhi.temperature                                    =  0.003
zlo.type                                           = "wall_model"
mac_proj.num_pre_smooth                            = 8 
mac_proj.num_post_smooth                           = 8 
mac_proj.mg_rtol                                   = -1 
mac_proj.mg_atol                                   = 1e-4 
mac_proj.maxiter                                   = 25 
mac_proj.fmg_maxiter                               = 4
nodal_proj.num_pre_smooth                          = 8 
nodal_proj.num_post_smooth                         = 8 
nodal_proj.mg_rtol                                 = -1 
nodal_proj.mg_atol                                 = 1e-4 
nodal_proj.maxiter                                 = 25 
nodal_proj.fmg_maxiter                             = 4
diffusion.mg_rtol                                  = -1 
diffusion.mg_atol                                  = 1e-4 
temperature_diffusion.mg_rtol                      = -1 
temperature_diffusion.mg_atol                      = 1e-4 
tke_diffusion.mg_rtol                              = -1 
tke_diffusion.mg_atol                              = 1e-4 
ABL.initial_wind_profile                           = true
ABL.rans_1dprofile_file                            = "rans_1d.info" 
ABL.meso_sponge_start                              = 3840 
ABL.temperature_heights                            = 0  8.0521   16.1042   24.1563   32.2084   40.2605   48.3126   56.3647   64.4168   72.4689   80.521   88.5731   96.6252   104.677   112.729   120.782   128.834   136.886   144.938   152.99   161.042   169.094   177.146   185.198   193.25   201.303   209.355   217.407   225.459   233.511   241.563   249.615   257.667   265.719   273.772   281.824   289.876   297.928   305.98   314.032   322.084   330.136   338.188   346.24   354.293   362.345   370.397   378.449   386.501   394.553   402.605   410.657   418.709   426.762   434.814   442.866   450.918   458.97   467.022   475.074   483.126   491.178   499.23   507.283   515.335   523.387   531.439   539.491   547.543   555.595   563.647   571.699   579.751   587.804   595.856   603.908   611.96   620.012   628.064   636.116   644.168   652.22   660.273   668.325   676.377   684.429   692.481   700.533   708.585   716.637   724.689   732.741   740.794   748.846   756.898   764.95   773.002   781.054   789.106   797.158   805.21   813.263   821.315   829.367   837.419   845.471   853.523   861.575   869.627   877.679   885.731   893.784   901.836   909.888   917.94   925.992   934.044   942.096   950.148   958.2   966.252   974.305   982.357   990.409   998.461   1006.51   1014.57   1022.62   1030.67   1038.72   1046.77   1054.83   1062.88   1070.93   1078.98   1087.03   1095.09   1103.14   1111.19   1119.24   1127.29   1135.35   1143.4   1151.45   1159.5   1167.56   1175.61   1183.66   1191.71   1199.76   1207.82   1215.87   1223.92   1231.97   1240.02   1248.08   1256.13   1264.18   1272.23   1280.28   1288.34   1296.39   1304.44   1312.49   1320.55   1328.6   1336.65   1344.7   1352.75   1360.81   1368.86   1376.91   1384.96   1393.01   1401.07   1409.12   1417.17   1425.22   1433.27   1441.33   1449.38   1457.43   1465.48   1473.54   1481.59   1489.64   1497.69   1505.74   1513.8   1521.85   1529.9   1537.95   1546   1554.06   1562.11   1570.16   1578.21   1586.26   1594.32   1602.37   1610.42   1618.47   1626.53   1634.58   1642.63   1650.68   1658.73   1666.79   1674.84   1682.89   1690.94   1698.99   1707.05   1715.1   1723.15   1731.2   1739.25   1747.31   1755.36   1763.41   1771.46   1779.51   1787.57   1795.62   1803.67   1811.72   1819.78   1827.83   1835.88   1843.93   1851.98   1860.04   1868.09   1876.14   1884.19   1892.24   1900.3   1908.35   1916.4   1924.45   1932.5  5888 
ABL.temperature_values                             = 245.346  259.826   287.76   298.741   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300.001   300.001   300.001   300.001   300.002   300.004   300.007   300.016   300.043   300.072   300.097   300.121   300.145   300.169   300.193   300.217   300.242   300.266   300.29   300.314   300.338   300.362   300.386   300.411   300.435   300.459   300.483   300.507   300.531   300.556   300.58   300.604   300.628   300.652   300.676   300.701   300.725   300.749   300.773   300.797   300.821   300.845   300.87   300.894   300.918   300.942   300.966   300.99   301.015   301.039   301.063   301.087   301.111   301.135   301.159   301.184   301.208   301.232   301.256   301.28   301.304   301.329   301.353   301.377   301.401   301.425   301.449   301.474   301.498   301.522   301.546   301.57   301.594   301.618   301.643   301.667   301.691   301.715   301.739   301.763   301.788   301.812   301.836   301.86   301.884   301.908   301.932   301.957   301.981   302.005   302.029   302.053   302.077   302.102   302.126   302.15   302.174   302.198   302.222   302.247   302.271   302.295   302.319   302.343   302.367   302.391   302.416   302.44   302.464   302.488   302.512   302.536   302.561   302.585   302.609   302.633   302.657   302.681   302.705   302.73   302.754   302.778   302.802   302.826   302.85   302.875   302.899   302.923   302.947   302.971   302.995   303.02   303.044   303.068   303.092   303.116   303.14   303.164   303.189   303.213   303.237   303.261   303.285   303.309   303.334   303.358   303.38   303.38  303.38 
# tagging
tagging.labels                                     = mast1 mast1terrain 
tagging.mast1.type                                 = GeometryRefinement
tagging.mast1.shapes                               = metmastobject0
tagging.mast1.min_level                            = 0
tagging.mast1.max_level                            = 2
tagging.mast1.metmastobject0.type                  = cylinder 
tagging.mast1.metmastobject0.start                 = 8.49331e-06 -0.000196554 808.505
tagging.mast1.metmastobject0.end                   = 8.49331e-06 -0.000196554 1008.5
tagging.mast1.metmastobject0.outer_radius          = 500
tagging.mast1.metmastobject0.inner_radius          = 0
tagging.mast1terrain.type                          = FieldRefinement
tagging.mast1terrain.field_name                    = terrain_blank
tagging.mast1terrain.grad_error                    = 0.1 0.1 0.1 0.1 0.1 0.1
tagging.mast1terrain.box_lo                        = -500 -500 758.505 
tagging.mast1terrain.box_hi                        = 500 500 858.505 
amr.max_level                                      = 3
# postprocessing
incflo.post_processing                             = terrain10  terrain50  terrain100  terrain150  terrain200  terrain250  mast1 
terrain10.fields                                   = velocity temperature 
terrain10.output_format                            = "native"
terrain10.output_frequency                         = 100
terrain10.labels                                   = terrain10 
terrain10.terrain10.type                           = ProbeSampler
terrain10.terrain10.probe_location_file            = "terrain.csv"
terrain10.terrain10.offset_vector                  = 0 0 1
terrain10.terrain10.offsets                        = 10 
terrain50.fields                                   = velocity temperature 
terrain50.output_format                            = "native"
terrain50.output_frequency                         = 100
terrain50.labels                                   = terrain50 
terrain50.terrain50.type                           = ProbeSampler
terrain50.terrain50.probe_location_file            = "terrain.csv"
terrain50.terrain50.offset_vector                  = 0 0 1
terrain50.terrain50.offsets                        = 50 
terrain100.fields                                  = velocity temperature 
terrain100.output_format                           = "native"
terrain100.output_frequency                        = 100
terrain100.labels                                  = terrain100 
terrain100.terrain100.type                         = ProbeSampler
terrain100.terrain100.probe_location_file          = "terrain.csv"
terrain100.terrain100.offset_vector                = 0 0 1
terrain100.terrain100.offsets                      = 100 
terrain150.fields                                  = velocity temperature 
terrain150.output_format                           = "native"
terrain150.output_frequency                        = 100
terrain150.labels                                  = terrain150 
terrain150.terrain150.type                         = ProbeSampler
terrain150.terrain150.probe_location_file          = "terrain.csv"
terrain150.terrain150.offset_vector                = 0 0 1
terrain150.terrain150.offsets                      = 150 
terrain200.fields                                  = velocity temperature 
terrain200.output_format                           = "native"
terrain200.output_frequency                        = 100
terrain200.labels                                  = terrain200 
terrain200.terrain200.type                         = ProbeSampler
terrain200.terrain200.probe_location_file          = "terrain.csv"
terrain200.terrain200.offset_vector                = 0 0 1
terrain200.terrain200.offsets                      = 200 
terrain250.fields                                  = velocity temperature 
terrain250.output_format                           = "native"
terrain250.output_frequency                        = 100
terrain250.labels                                  = terrain250 
terrain250.terrain250.type                         = ProbeSampler
terrain250.terrain250.probe_location_file          = "terrain.csv"
terrain250.terrain250.offset_vector                = 0 0 1
terrain250.terrain250.offsets                      = 250 
mast1.fields                                       = velocity temperature 
mast1.output_format                                = "native"
mast1.output_frequency                             = 60
mast1.labels                                       = mast1 
mast1.mast1.type                                   = LineSampler
mast1.mast1.num_points                             = 50
mast1.mast1.start                                  = 8.49331e-06 -0.000196554 788.505
mast1.mast1.end                                    = 8.49331e-06 -0.000196554 988.505
