# Generating the terrain file
# Geometry
geometry.prob_lo                                   = -25000 -25000 0 
geometry.prob_hi                                   = 24980 24980 5888 
geometry.is_periodic                               = 0 0 0
# Grid 
amr.n_cell                                         = 520 520 248
time.stop_time                                     = 600
time.initial_dt                                    = 1.0
time.fixed_dt                                      = -1
time.cfl                                           = 0.5
time.plot_time_interval                            = 600
time.checkpoint_time_interval                      = -1
io.output_default_variables                        = false 
io.outputs                                         = velocity temperature mu_turb tke terrainz0 
io.int_outputs                                     = terrain_blank terrain_drag 
# incflo 
incflo.physics                                     = ABL TerrainDrag
incflo.density                                     = 1.225
incflo.gravity                                     = 0.  0. -9.81 
incflo.velocity                                    = 7.11907 6.68714 0 
incflo.verbose                                     = 0
incflo.initial_iterations                          = 8
incflo.do_initial_proj                             = true
incflo.constant_density                            = true
incflo.use_godunov                                 = true
incflo.godunov_type                                = "ppm"
incflo.diffusion_type                              = 2
# transport equation parameters 
transport.model                                    = ConstTransport
transport.viscosity                                = 1e-5
transport.laminar_prandtl                          = 0.7
transport.turbulent_prandtl                        = 0.333
# turbulence equation parameters
turbulence.model                                   = KLAxell
TKE.source_terms                                   = KransAxell
# Atmospheric boundary layer
ABL.perturb_velocity                               = false
ABL.perturb_temperature                            = false
ABL.kappa                                          = .41
ABL.normal_direction                               = 2
ABL.reference_temperature                          = 300
ABL.stats_output_format                            = netcdf
ABL.surface_roughness_z0                           = 0.1
ABL.wall_shear_stress_type                         = local
ABL.surface_temp_flux                              = 6.01844e-30
ABL.mol_length                                     = -1e+30
ABL.wall_het_model                                 = "mol"
ABL.horizontal_sponge_temp                         = true
ABL.horizontal_sponge_tke                          = true
# Source
ICNS.source_terms                                  = VelocityFreeAtmosphereForcing ABLMeanBoussinesq BoussinesqBuoyancy  CoriolisForcing  GeostrophicForcing  DragForcing 
GeostrophicForcing.geostrophic_wind                = 7.11907 6.68714 0
TerrainDrag.terrain_file                           = "terrain.amrwind.new" 
Temperature.source_terms                           = TemperatureFreeAtmosphereForcing  DragTempForcing
DragForcing.sponge_west                            = 1
DragForcing.sponge_east                            = 1
DragForcing.sponge_north                           = 1
DragForcing.sponge_south                           = 1
DragForcing.sponge_distance_west                   = -2500
DragForcing.sponge_distance_east                   = 2500
DragForcing.sponge_distance_south                  = -2500
DragForcing.sponge_distance_north                  = 2500
DragTempForcing.soil_temperature                   = 300
RayleighDamping.force_coord_directions             = 0 0 1
BoussinesqBuoyancy.reference_temperature           = 300
BoussinesqBuoyancy.thermal_expansion_coeff         = 0.00333333
CoriolisForcing.east_vector                        = 1.0 0.0 0.0 
CoriolisForcing.north_vector                       = 0.0 1.0 0.0 
CoriolisForcing.latitude                           = 44.1645 
RayleighDamping.reference_velocity                 = 7.11907 6.68714 0
RayleighDamping.length_sloped_damping              = 512
RayleighDamping.length_complete_damping            = 1536
RayleighDamping.time_scale                         = 20.0
ABL.metmast_horizontal_radius                      = 500
ABL.metmast_vertical_radius                        = 5
ABL.metmast_damping_radius                         = 100
# BC 
xlo.type                                           = "pressure_outflow"
xhi.type                                           = "pressure_outflow"
ylo.type                                           = "pressure_outflow"
yhi.type                                           = "pressure_outflow"
zhi.type                                           = "slip_wall"
zhi.temperature_type                               = "fixed_gradient"
zhi.temperature                                    =  0.003
zlo.type                                           = "wall_model"
mac_proj.num_pre_smooth                            = 8 
mac_proj.num_post_smooth                           = 8 
mac_proj.mg_rtol                                   = -1 
mac_proj.mg_atol                                   = 1e-4 
mac_proj.maxiter                                   = 25 
mac_proj.fmg_maxiter                               = 4
nodal_proj.num_pre_smooth                          = 8 
nodal_proj.num_post_smooth                         = 8 
nodal_proj.mg_rtol                                 = -1 
nodal_proj.mg_atol                                 = 1e-4 
nodal_proj.maxiter                                 = 25 
nodal_proj.fmg_maxiter                             = 4
diffusion.mg_rtol                                  = -1 
diffusion.mg_atol                                  = 1e-4 
temperature_diffusion.mg_rtol                      = -1 
temperature_diffusion.mg_atol                      = 1e-4 
tke_diffusion.mg_rtol                              = -1 
tke_diffusion.mg_atol                              = 1e-4 
ABL.initial_wind_profile                           = true
ABL.rans_1dprofile_file                            = "rans_1d.info" 
ABL.meso_sponge_start                              = 3840 
ABL.temperature_heights                            = 0  16.0669   32.1339   48.2008   64.2678   80.3347   96.4017   112.469   128.536   144.603   160.669   176.736   192.803   208.87   224.937   241.004   257.071   273.138   289.205   305.272   321.339   337.406   353.473   369.54   385.607   401.674   417.741   433.808   449.874   465.941   482.008   498.075   514.142   530.209   546.276   562.343   578.41   594.477   610.544   626.611   642.678   658.745   674.812   690.879   706.946   723.013   739.079   755.146   771.213   787.28   803.347   819.414   835.481   851.548   867.615   883.682   899.749   915.816   931.883   947.95   964.017   980.084   996.151   1012.22   1028.28   1044.35   1060.42   1076.49   1092.55   1108.62   1124.69   1140.75   1156.82   1172.89   1188.95   1205.02   1221.09   1237.15   1253.22   1269.29   1285.36   1301.42   1317.49   1333.56   1349.62   1365.69   1381.76   1397.82   1413.89   1429.96   1446.03   1462.09   1478.16   1494.23   1510.29   1526.36   1542.43   1558.49   1574.56   1590.63   1606.69   1622.76   1638.83   1654.9   1670.96   1687.03   1703.1   1719.16   1735.23   1751.3   1767.36   1783.43   1799.5   1815.56   1831.63   1847.7   1863.77   1879.83   1895.9   1911.97   1928.03   1944.1   1960.17   1976.23   1992.3   2008.37   2024.44   2040.5   2056.57   2072.64   2088.7   2104.77   2120.84   2136.9   2152.97   2169.04   2185.1   2201.17   2217.24   2233.31   2249.37   2265.44   2281.51   2297.57   2313.64   2329.71   2345.77   2361.84   2377.91   2393.97   2410.04   2426.11   2442.18   2458.24   2474.31   2490.38   2506.44   2522.51   2538.58   2554.64   2570.71   2586.78   2602.85   2618.91   2634.98   2651.05   2667.11   2683.18   2699.25   2715.31   2731.38   2747.45   2763.51   2779.58   2795.65   2811.72   2827.78   2843.85   2859.92   2875.98   2892.05   2908.12   2924.18   2940.25   2956.32   2972.38   2988.45   3004.52   3020.59   3036.65   3052.72   3068.79   3084.85   3100.92   3116.99   3133.05   3149.12   3165.19   3181.26   3197.32   3213.39   3229.46   3245.52   3261.59   3277.66   3293.72   3309.79   3325.86   3341.92   3357.99   3374.06   3390.13   3406.19   3422.26   3438.33   3454.39   3470.46   3486.53   3502.59   3518.66   3534.73   3550.79   3566.86   3582.93   3599   3615.06   3631.13   3647.2   3663.26   3679.33   3695.4   3711.46   3727.53   3743.6   3759.67   3775.73   3791.8   3807.87   3823.93   3840  5888 
ABL.temperature_values                             = 300  300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300   300.001   300.001   300.001   300.001   300.002   300.003   300.004   300.006   300.01   300.017   300.035   300.08   300.142   300.194   300.241   300.289   300.337   300.386   300.434   300.482   300.53   300.579   300.627   300.675   300.723   300.771   300.82   300.868   300.916   300.964   301.012   301.061   301.109   301.157   301.205   301.253   301.302   301.35   301.398   301.446   301.494   301.542   301.588   301.623   301.623  301.623 
# tagging
tagging.labels                                     = mast1 mast1terrain 
tagging.mast1.type                                 = GeometryRefinement
tagging.mast1.shapes                               = metmastobject0
tagging.mast1.min_level                            = 0
tagging.mast1.max_level                            = 2
tagging.mast1.metmastobject0.type                  = cylinder 
tagging.mast1.metmastobject0.start                 = 8.49331e-06 -0.000196554 808.505
tagging.mast1.metmastobject0.end                   = 8.49331e-06 -0.000196554 1008.5
tagging.mast1.metmastobject0.outer_radius          = 500
tagging.mast1.metmastobject0.inner_radius          = 0
tagging.mast1terrain.type                          = FieldRefinement
tagging.mast1terrain.field_name                    = terrain_blank
tagging.mast1terrain.grad_error                    = 0.1 0.1 0.1 0.1 0.1 0.1
tagging.mast1terrain.box_lo                        = -500 -500 758.505 
tagging.mast1terrain.box_hi                        = 500 500 858.505 
amr.max_level                                      = 3
# postprocessing
incflo.post_processing                             = terrain10  terrain50  terrain100  terrain150  terrain200  terrain250  mast1 
terrain10.fields                                   = velocity temperature 
terrain10.output_format                            = "native"
terrain10.output_frequency                         = 100
terrain10.labels                                   = terrain10 
terrain10.terrain10.type                           = ProbeSampler
terrain10.terrain10.probe_location_file            = "terrain.csv"
terrain10.terrain10.offset_vector                  = 0 0 1
terrain10.terrain10.offsets                        = 10 
terrain50.fields                                   = velocity temperature 
terrain50.output_format                            = "native"
terrain50.output_frequency                         = 100
terrain50.labels                                   = terrain50 
terrain50.terrain50.type                           = ProbeSampler
terrain50.terrain50.probe_location_file            = "terrain.csv"
terrain50.terrain50.offset_vector                  = 0 0 1
terrain50.terrain50.offsets                        = 50 
terrain100.fields                                  = velocity temperature 
terrain100.output_format                           = "native"
terrain100.output_frequency                        = 100
terrain100.labels                                  = terrain100 
terrain100.terrain100.type                         = ProbeSampler
terrain100.terrain100.probe_location_file          = "terrain.csv"
terrain100.terrain100.offset_vector                = 0 0 1
terrain100.terrain100.offsets                      = 100 
terrain150.fields                                  = velocity temperature 
terrain150.output_format                           = "native"
terrain150.output_frequency                        = 100
terrain150.labels                                  = terrain150 
terrain150.terrain150.type                         = ProbeSampler
terrain150.terrain150.probe_location_file          = "terrain.csv"
terrain150.terrain150.offset_vector                = 0 0 1
terrain150.terrain150.offsets                      = 150 
terrain200.fields                                  = velocity temperature 
terrain200.output_format                           = "native"
terrain200.output_frequency                        = 100
terrain200.labels                                  = terrain200 
terrain200.terrain200.type                         = ProbeSampler
terrain200.terrain200.probe_location_file          = "terrain.csv"
terrain200.terrain200.offset_vector                = 0 0 1
terrain200.terrain200.offsets                      = 200 
terrain250.fields                                  = velocity temperature 
terrain250.output_format                           = "native"
terrain250.output_frequency                        = 100
terrain250.labels                                  = terrain250 
terrain250.terrain250.type                         = ProbeSampler
terrain250.terrain250.probe_location_file          = "terrain.csv"
terrain250.terrain250.offset_vector                = 0 0 1
terrain250.terrain250.offsets                      = 250 
mast1.fields                                       = velocity temperature 
mast1.output_format                                = "native"
mast1.output_frequency                             = 60
mast1.labels                                       = mast1 
mast1.mast1.type                                   = LineSampler
mast1.mast1.num_points                             = 50
mast1.mast1.start                                  = 8.49331e-06 -0.000196554 788.505
mast1.mast1.end                                    = 8.49331e-06 -0.000196554 988.505
